import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.b67c47e6.js";const u=JSON.parse('{"title":"Web API","description":"","frontmatter":{},"headers":[],"relativePath":"clients/nuxt/webapi.md","filePath":"clients/nuxt/webapi.md"}'),e={name:"clients/nuxt/webapi.md"},o=l(`<h1 id="web-api" tabindex="-1">Web API <a class="header-anchor" href="#web-api" aria-label="Permalink to &quot;Web API&quot;">​</a></h1><p>All of the data used by the app is fetched from a REST Http service and you can also use this service independently of the client. The relevant code sits in <code>server/api/graph</code> and what is being served can be defined in the <code>graphDB.ts</code> file.</p><h2 id="data-access-configuration" tabindex="-1">Data access configuration <a class="header-anchor" href="#data-access-configuration" aria-label="Permalink to &quot;Data access configuration&quot;">​</a></h2><p>All of the services sit in separate files and this is part of the Nuxt mechanics. For instance, the edge deletion API method corresponds to the <code>edge.delete.ts</code> file:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">defineEventHandler</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">event</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">body</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">readBody</span><span style="color:#E1E4E8;">(event);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> GraphDB.</span><span style="color:#B392F0;">deleteEdge</span><span style="color:#E1E4E8;">(body.id);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">defineEventHandler</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">event</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">body</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">readBody</span><span style="color:#24292E;">(event);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> GraphDB.</span><span style="color:#6F42C1;">deleteEdge</span><span style="color:#24292E;">(body.id);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre></div><p>The actual code deleting an edge is done inside Qwiery and is defined in the <code>graphDB.ts</code> file:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Qwiery backend with JSON adapter enabled.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">q</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Qwiery</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    adapters: [</span><span style="color:#9ECBFF;">&quot;memory&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">    memory: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        autoSave: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        interval: </span><span style="color:#79B8FF;">5000</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> { q </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> GraphDB };</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Qwiery backend with JSON adapter enabled.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">q</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qwiery</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    adapters: [</span><span style="color:#032F62;">&quot;memory&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">    memory: {</span></span>
<span class="line"><span style="color:#24292E;">        autoSave: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        interval: </span><span style="color:#005CC5;">5000</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> { q </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> GraphDB };</span></span></code></pre></div><p>The configuration above will use an in-memory JSON graph and save the state every 5 seconds.</p><p>If you prefer to use an SQL database, you can change this to:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Qwiery backend with SQLite adapter enabled.&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> Sqlite </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;~/utils/qwiery-sqlite/lib/index.js&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">Qwiery.</span><span style="color:#B392F0;">plugin</span><span style="color:#E1E4E8;">(Sqlite);</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> filePath </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> path.</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(process.</span><span style="color:#B392F0;">cwd</span><span style="color:#E1E4E8;">(), </span><span style="color:#9ECBFF;">&quot;data.sqlite&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Data path &gt;&gt;&quot;</span><span style="color:#E1E4E8;">, filePath);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">q</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Qwiery</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">	adapters: [</span><span style="color:#9ECBFF;">&quot;sqlite&quot;</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">	sqlite: {</span></span>
<span class="line"><span style="color:#E1E4E8;">		dialect: </span><span style="color:#9ECBFF;">&quot;sqlite&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">		storage: filePath,</span></span>
<span class="line"><span style="color:#E1E4E8;">	},</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Qwiery backend with SQLite adapter enabled.&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> Sqlite </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;~/utils/qwiery-sqlite/lib/index.js&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">Qwiery.</span><span style="color:#6F42C1;">plugin</span><span style="color:#24292E;">(Sqlite);</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> filePath </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> path.</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(process.</span><span style="color:#6F42C1;">cwd</span><span style="color:#24292E;">(), </span><span style="color:#032F62;">&quot;data.sqlite&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;Data path &gt;&gt;&quot;</span><span style="color:#24292E;">, filePath);</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">q</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Qwiery</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">	adapters: [</span><span style="color:#032F62;">&quot;sqlite&quot;</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">	sqlite: {</span></span>
<span class="line"><span style="color:#24292E;">		dialect: </span><span style="color:#032F62;">&quot;sqlite&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">		storage: filePath,</span></span>
<span class="line"><span style="color:#24292E;">	},</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre></div><p>There is a food database in the root of the solution called <code>data.sqlite</code> (around 40MB) which has information about recipes and ingredients. You can open this database with any SQLite client. Qwiery uses two graph tables (nodes and edges) inside this relational database and transparently behaves as if it was a graph database.</p><h2 id="customization" tabindex="-1">Customization <a class="header-anchor" href="#customization" aria-label="Permalink to &quot;Customization&quot;">​</a></h2><p>You can alter any of the API methods and mix &#39;n match different stores. You can also add additional API methods with just a few lines of code.</p><p>For enterprise customers, we have standalone implementations using <strong>Express, C# and Java</strong>.</p><h2 id="api-client-aka-proxy" tabindex="-1">API Client (aka proxy) <a class="header-anchor" href="#api-client-aka-proxy" aria-label="Permalink to &quot;API Client (aka proxy)&quot;">​</a></h2><p>In the <code>utils/GraphAPI.ts</code> you can find an abstract class called <code>GraphAPIBase</code> and a default implementation going to the aforementioned web services. Here as well, you can redirect calls to a web service outside this Nuxt implementation, use a service independent of the Qwiery plugin mechanism and more. The Qwiery client application does not force you in any way, it tries to make the development as open and easy as possible.</p>`,16),p=[o];function t(c,r,i,y,E,d){return a(),n("div",null,p)}const F=s(e,[["render",t]]);export{u as __pageData,F as default};
